!function(t){function i(s){if(e[s])return e[s].exports;var h=e[s]={exports:{},id:s,loaded:!1};return t[s].call(h.exports,h,h.exports,i),h.loaded=!0,h.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){"use strict";var s=document.getElementById("main-canvas"),h=s.getContext("2d"),n=e(5),o=e(6),r=new n(h,new o);requestAnimationFrame(function c(){console.log("in rAF"),h.clearRect(0,0,s.width,s.height),r.gameText(),r.update(),requestAnimationFrame(c)})},function(t,i){"use strict";function e(t,i,e){this.size={x:2,y:2},this.center=i,this.startPoint=t,this.context=e,this.speed=0,this.slope={x:2*Math.random()-1,y:2*Math.random()-1}}e.prototype.move=function(){var t=Math.abs(this.center.x)-Math.abs(this.startPoint.x),i=Math.abs(this.center.y)-Math.abs(this.startPoint.y);t<20&&i<20?(this.center.x+=this.slope.x,this.center.y+=this.slope.y):(this.center.x=900,this.center.y=900,this.slope={x:0,y:0})},e.prototype.draw=function(){return this.context.fillStyle="white",this.context.fillRect(this.center.x-this.size.x/2,this.center.y-this.size.y/2,this.size.x,this.size.y),this},t.exports=e},function(t,i){"use strict";function e(t,i){this.size={x:4,y:4},this.center=t,this.context=i,this.speed=1}e.prototype.draw=function(){return this.context.fillStyle="white",this.context.fillRect(this.center.x-this.size.x/2,this.center.y-this.size.y/2,this.size.x,this.size.y),this},e.prototype.accelerate=function(){this.withinBounds()===!0?(this.center.x+=this.speed*this.center.slope.x/1.5,this.center.y+=this.speed*this.center.slope.y/1.5):(this.center.x=900,this.center.y=900,this.center.slope={x:0,y:0})},e.prototype.withinBounds=function(){if(this.center.x>0&&this.center.x<700&&this.center.y>0&&this.center.y<530)return!0},t.exports=e},function(t,i,e){"use strict";function s(t,i){this.shipCenter={x:-50,y:-50},this.speed=1,this.context=t,this.slope={x:2*Math.random()-1,y:2*Math.random()-1},this.hits=0,this.radius=this.setRadius()}var h=e(2),n=e(1);s.prototype.update=function(t){t%100===0&&this.changeDirection(),this.drawAlien().moveAlienShip()},s.prototype.explode=function(){for(var t=0,i=[],e=this;this.radius/2>t;)i.push(new n({x:e.shipCenter.x,y:e.shipCenter.y},{x:e.shipCenter.x+t,y:e.shipCenter.y+t},e.context)),t++;return i},s.prototype.fireWeapon=function(t){return new h({x:this.shipCenter.x,y:this.shipCenter.y,slope:this.findOpponent(t)},this.context)},s.prototype.findOpponent=function(t){for(var i=(this.shipCenter.y-t.y)*-1,e=this.shipCenter.x-t.x;Math.abs(i)>4||Math.abs(e)>4;)i*=.9,e*=.9;return{x:e,y:i}},s.prototype.setRadius=function(){var t=Math.random();return t=t>.7?25:t>.4?20:15},s.prototype.changeDirection=function(){this.slope={x:2*Math.random()-1,y:2*Math.random()-1}},s.prototype.moveAlienShip=function(){return this.shipCenter.x+=this.slope.x+this.speed,this.shipCenter.y+=this.slope.y+this.speed,this},s.prototype.drawAlien=function(){return this.checkPosition(),this.context.strokeStyle="white",this.context.beginPath(),this.context.moveTo(this.shipCenter.x-this.radius,this.shipCenter.y),this.context.lineTo(this.shipCenter.x+this.radius,this.shipCenter.y),this.context.lineTo(this.shipCenter.x+this.radius-.5*this.radius,this.shipCenter.y-.25*this.radius),this.context.arc(this.shipCenter.x,this.shipCenter.y-.25*this.radius,.25*this.radius,3.1,2*Math.PI),this.context.lineTo(this.shipCenter.x-.5*this.radius,this.shipCenter.y-.25*this.radius),this.context.lineTo(this.shipCenter.x-this.radius,this.shipCenter.y),this.context.lineTo(this.shipCenter.x-.625*this.radius,this.shipCenter.y+.25*this.radius),this.context.lineTo(this.shipCenter.x+this.radius-.375*this.radius,this.shipCenter.y+.25*this.radius),this.context.lineTo(this.shipCenter.x+this.radius,this.shipCenter.y),this.context.stroke(),this},s.prototype.checkPosition=function(){this.shipCenter.x<-50&&(this.shipCenter.x=700),this.shipCenter.x>700&&(this.shipCenter.x=-50),this.shipCenter.y<-50&&(this.shipCenter.y=530),this.shipCenter.y>580&&(this.shipCenter.y=-50)},t.exports=s},function(t,i,e){"use strict";function s(t,i,e){void 0===i&&(i={x:-50,y:-50}),this.center=i,e?this.radius=e:this.setRadius(),this.context=t,this.slope={x:2*Math.random()-1,y:2*Math.random()-1},this.hits=0}var h=e(1);s.prototype.setRadius=function(){this.radius=80*Math.random(),this.radius<10&&(this.radius=20)},s.prototype.explode=function(){for(var t=0,i=[],e=this;this.radius/2>t;)i.push(new h({x:e.center.x,y:e.center.y},{x:e.center.x+t,y:e.center.y+t},e.context)),t++;return i},s.prototype.draw=function(){return this.checkPosition(),this.context.fillStyle="white",this.context.beginPath(),this.context.moveTo(this.center.x+this.radius,this.center.y),this.context.lineTo(this.center.x+.8*this.radius,this.center.y+.6*this.radius),this.context.lineTo(this.center.x+.5*this.radius,this.center.y+.85*this.radius),this.context.lineTo(this.center.x+.3*this.radius,this.center.y+.95*this.radius),this.context.lineTo(this.center.x+.12*this.radius,this.center.y+this.radius),this.context.lineTo(this.center.x-.2*this.radius,this.center.y+this.radius),this.context.lineTo(this.center.x-.5*this.radius,this.center.y+.8*this.radius),this.context.lineTo(this.center.x-.8*this.radius,this.center.y+.6*this.radius),this.context.lineTo(this.center.x-this.radius,this.center.y+.4*this.radius),this.context.lineTo(this.center.x-this.radius,this.center.y),this.context.lineTo(this.center.x-.7*this.radius,this.center.y-.7*this.radius),this.context.lineTo(this.center.x-.4*this.radius,this.center.y-.85*this.radius),this.context.lineTo(this.center.x-.15*this.radius,this.center.y-this.radius),this.context.lineTo(this.center.x+.3*this.radius,this.center.y-this.radius),this.context.lineTo(this.center.x+.7*this.radius,this.center.y-.7*this.radius),this.context.closePath(),this.context.stroke(),this},s.prototype.moveAsteroid=function(){return this.center.x+=this.slope.x,this.center.y+=this.slope.y,this},s.prototype.checkPosition=function(){this.center.y<this.radius*-2&&(this.center.y=529+this.radius),this.center.y>530+this.radius&&(this.center.y=1-this.radius),this.center.x<this.radius*-2&&(this.center.x=699+this.radius),this.center.x>700+this.radius&&(this.center.x=1-this.radius)},t.exports=s},function(t,i,e){"use strict";function s(t,i){this.context=t,this.level=1,this.asteroids=[],this.keyboard=i,this.started=!1,this.introTime=0,this.lives=3,this.lifeChars=["","A","A A","A A A"],this.dead=!1,this.deadTime=0,this.spawnTime=0,this.asteroidsToRemove=[],this.aliensToRemove=[],this.asteroidsDestroyed=0,this.aliensDestroyed=0,this.gameOver=!1,this.alienShips=[],this.alienBullets=[],this.particles=[],this.ship=this.createShip()}var h=e(4),n=e(7),o=e(3);s.prototype.createShip=function(){return new n((-1e3),(-1e3),this.context,this.keyboard)},s.prototype.createAlienShips=function(){if(this.level>1&&this.time<300)for(;this.alienShips.length<this.level/3;)this.alienShips.push(new o(this.context,this.ship.point))},s.prototype.clearBullets=function(){this.alienBullets.length>100&&this.alienBullets.splice(0,50),this.ship.bullets.length>100&&this.ship.bullets.splice(0,50)},s.prototype.createAsteroid=function(t,i,e){if(e)for(var s=0;s<e;)this.asteroids.push(new h(this.context,{x:i.center.x+s,y:i.center.y+s},i.radius/3)),s++;this.asteroids.length-1<t+7&&this.asteroids.push(new h(this.context))},s.prototype.startGame=function(){this.started=!0,this.ship.unHide(),this.dead=!1,this.gameOver=!1,this.lives=3,this.asteroidsDestroyed=0,this.level=1,this.ship.speed=0,this.time=0},s.prototype.removeAsteroids=function(){var t=this;this.asteroidsToRemove.forEach(function(i){t.asteroids.splice(i,1)})},s.prototype.renderExplosion=function(){this.particles.forEach(function(t){t.draw().move()}),this.asteroidsToRemove=[],this.particles.length>100&&this.particles.splice(0,50)},s.prototype.drawShip=function(){this.ship.invincible?this.flashTime():this.ship.draw().accelerate()},s.prototype.flashTime=function(){this.spawnTime+=1,this.spawnTime<10?this.ship.draw().accelerate():this.spawnTime>20&&(this.spawnTime=0)},s.prototype.updateBullets=function(){this.clearBullets();var t=this;this.time%100===0&&this.alienShips.forEach(function(i){t.alienBullets.push(i.fireWeapon({x:t.ship.point.x,y:t.ship.point.y}))})},s.prototype.update=function(){this.checkTime(),this.createAsteroid(this.level),this.createAlienShips(),this.removeAsteroids(),this.removeAliens(),this.renderExplosion(),this.updateBullets(),this.checkBulletToShipCollison(),this.checkShipCollision(),this.checkBulletCollision(),this.checkAlienCollision(),this.checkBulletToAlienCollision(),this.alienBullets.length>0&&this.alienBullets.forEach(function(t){t.draw().accelerate()}),this.ship.bullets.length>0&&this.ship.bullets.forEach(function(t){t.draw().accelerate()});var t=this.time;this.ship.update(t),this.drawShip(),this.ship.decelerate(),this.asteroids.forEach(function(t){t.draw().moveAsteroid()}),this.alienShips.forEach(function(i){i.update(t)}),this.keyboard.isDown(this.keyboard.KEYS.ENTER)&&!this.started&&this.startGame(),this.keyboard.isDown(this.keyboard.KEYS.ENTER)&&this.gameOver&&this.startGame(),this.dead&&!this.gameOver&&this.respawnShip()},s.prototype.checkTime=function(){this.started&&!this.gameOver&&(this.time+=1),this.time>1e3&&(this.time=0,this.level+=1)},s.prototype.checkShipCollision=function(){var t=[this.ship.point,this.ship.rightSide,this.ship.leftSide],i=this,e=new Audio("collision.wav");this.asteroids.forEach(function(s){t.forEach(function(t){t.x>s.center.x-s.radius+5&&t.x<s.center.x+s.radius-5&&t.y>s.center.y-s.radius+5&&t.y<s.center.y+s.radius-5&&!i.ship.invincible&&(i.killShip(),e.play())})})},s.prototype.checkAlienCollision=function(){var t=[this.ship.point,this.ship.rightSide,this.ship.leftSide],i=this;this.alienShips.forEach(function(e,s){t.forEach(function(t){t.x>e.shipCenter.x-e.radius+2&&t.x<e.shipCenter.x+e.radius-2&&t.y>e.shipCenter.y-.3*e.radius&&t.y<e.shipCenter.y+.25*e.radius&&i.ship.invincible===!1&&(i.killShip(),i.hitAlien(e,s))})})},s.prototype.hitAsteroid=function(t,i){if(3===t.hits){this.explodeAsteroid(t),this.asteroidsToRemove.push(i);var e=new Audio("collision.wav");e.play()}else t.hits+=1},s.prototype.checkBulletCollision=function(){var t=this;t.ship.bullets.length>0&&t.ship.bullets.forEach(function(i,e){t.asteroids.forEach(function(s,h){i.center.x>s.center.x-s.radius+5&&i.center.x<s.center.x+s.radius-5&&i.center.y>s.center.y-s.radius+5&&i.center.y<s.center.y+s.radius-5&&(t.ship.bullets.splice(e,1),t.hitAsteroid(s,h))})})},s.prototype.checkBulletToAlienCollision=function(){var t=this;t.ship.bullets.length>0&&t.ship.bullets.forEach(function(i,e){t.alienShips.forEach(function(s,h){i.center.x>s.shipCenter.x-s.radius&&i.center.x<s.shipCenter.x+s.radius&&i.center.y>s.shipCenter.y-.3*s.radius&&i.center.y<s.shipCenter.y+.25*s.radius&&(t.ship.bullets.splice(e,1),t.hitAlien(s,h))})})},s.prototype.checkBulletToShipCollison=function(){var t=this.ship,i=this;this.alienBullets.forEach(function(e,s){e.center.x>t.center.x-t.radius&&e.center.x<t.center.x+t.radius&&e.center.y>t.center.y-t.radius&&e.center.y<t.center.y+t.radius&&(i.alienBullets.splice(s,1),i.killShip())})},s.prototype.hitAlien=function(t,i){if(3===t.hits){this.aliensDestroyed+=1,this.calculateScore(),this.aliensToRemove.push(i),this.particles=this.particles.concat(t.explode());var e=new Audio("collision.wav");e.play()}else t.hits+=1},s.prototype.removeAliens=function(){var t=this;this.aliensToRemove.forEach(function(i){t.alienShips.splice(i,1)}),this.aliensToRemove=[]},s.prototype.explodeAsteroid=function(t){this.asteroidsDestroyed+=1,this.calculateScore(),t.radius>60?this.createAsteroid(this.level,t,3):t.radius>30&&this.createAsteroid(this.level,t,2),this.particles=this.particles.concat(t.explode())},s.prototype.killShip=function(){if(!this.dead){var t=new Audio("collision.wav");this.particles=this.particles.concat(this.ship.explode()),t.play(),this.lives-=1,this.dead=!0,this.ship.hide(),this.ship.orientation=4.7123,this.time>759&&(this.time=750),this.deadTime=this.time,0===this.lives&&(this.gameOver=!0)}},s.prototype.respawnShip=function(){this.time<this.deadTime+80&&this.ship.unHide(),this.ship.invincible=!0,this.time>this.deadTime+240&&(this.dead=!1,this.ship.invincible=!1,this.deadTime=0)},s.prototype.setHighScore=function(){this.highScore=localStorage.highScore||0,this.score>this.highScore&&(this.highScore=this.score),localStorage.setItem("highScore",this.highScore)},s.prototype.endGame=function(){this.setHighScore(),this.context.font="55px Verdana",this.context.fillText("Game Over",350,140),this.context.font="20px Verdana",this.context.fillText("Asteroids Destroyed: "+this.asteroidsDestroyed,350,200),this.context.fillText("Alien Ships Destroyed: "+this.aliensDestroyed,350,235),this.context.fillText("Score: "+this.score,350,275),this.context.fillText("High Score: "+this.highScore,350,315),this.context.fillText("Press Enter to Play Again",350,450),this.gameOver=!0},s.prototype.gameText=function(){this.context.textAlign="center",this.started||this.intro(),this.lives<1&&this.endGame(),this.calculateScore(),this.context.font="15px Verdana",this.context.fillText("Level: "+this.level,45,25),this.context.fillText("Score: "+this.score,635,25),this.context.textAlign="left",this.context.fillText(this.lifeChars[this.lives],15,45)},s.prototype.calculateScore=function(){this.score=this.level*this.asteroidsDestroyed*10+30*this.aliensDestroyed},s.prototype.intro=function(){this.context.font="45px Impact",this.context.fillText("ASTEROIDS",350,220),this.introTime+=1,this.introTime<25?(this.context.font="20px Verdana",this.context.fillText("Hit Enter to Start!",350,250)):this.introTime>50&&(this.introTime=0)},t.exports=s},function(t,i){"use strict";function e(){var t={};window.onkeydown=function(i){t[i.keyCode]=!0},window.onkeyup=function(i){t[i.keyCode]=!1},this.isDown=function(i){return t[i]===!0},this.KEYS={LEFT:37,RIGHT:39,UP:38,SPACE:32,ENTER:13}}t.exports=e},function(t,i,e){"use strict";function s(t,i,e,s){this.orientation=4.7123,this.momentum=this.orientation,this.point={x:t,y:i},this.findSides(),this.speed=0,this.context=e,this.keyboard=s,this.bullets=[],this.coolDown=0,this.hidden=!0,this.invincible=!1,this.radius=8,this.center={x:350,y:313}}var h=e(2),n=e(1);s.prototype.explode=function(){for(var t=0,i=[],e=this;20>t;)i.push(new n({x:e.center.x,y:e.center.y},{x:e.center.x+t,y:e.center.y+t},e.context)),t++;return i},s.prototype.calculateSlope=function(){this.findCenter(),this.slope={x:this.point.x-this.center.x,y:this.point.y-this.center.y}},s.prototype.findCenter=function(){this.center.x=this.point.x+12*Math.cos(this.orientation),this.center.y=this.point.y-12*Math.sin(this.orientation)},s.prototype.decelerate=function(){this.speed>0&&(this.speed-=.015),this.speed<0&&(this.speed=0)},s.prototype.draw=function(){return this.checkPosition(),this.findSides(),this.context.beginPath(),this.context.moveTo(this.point.x,this.point.y),this.context.lineTo(this.rightSide.x,this.rightSide.y),this.context.lineTo(this.leftSide.x,this.leftSide.y),this.context.closePath(),this.context.strokeStyle="white",this.context.stroke(),this.context.beginPath(),this.context.moveTo(this.rightSide.x,this.rightSide.y),this.context.lineTo(this.rightSide.x+7*Math.cos(this.orientation+.3),this.rightSide.y-7*Math.sin(this.orientation+.3)),this.context.stroke(),this.context.beginPath(),this.context.moveTo(this.leftSide.x,this.leftSide.y),this.context.lineTo(this.leftSide.x+7*Math.cos(this.orientation-.3),this.leftSide.y-7*Math.sin(this.orientation-.3)),this.context.stroke(),this.calculateSlope(),this},s.prototype.inertia=function(){var t=this.point.x+20*Math.cos(this.momentum),i=this.point.y-20*Math.sin(this.momentum);this.inertiaSlope={x:this.point.x-t,y:this.point.y-i}},s.prototype.accelerate=function(){this.inertia(),this.point.x+=this.speed*this.inertiaSlope.x/10,this.point.y+=this.speed*this.inertiaSlope.y/10},s.prototype.findSides=function(){this.rightSide={x:this.point.x+20.6155*Math.cos(this.orientation+.3),y:this.point.y-20.6155*Math.sin(this.orientation+.3)},this.leftSide={x:this.point.x+20.6155*Math.cos(this.orientation-.3),y:this.point.y-20.6155*Math.sin(this.orientation-.3)}},s.prototype.fireBullet=function(){return this.coolDown=7,new h({x:this.point.x,y:this.point.y,slope:this.slope},this.context)},s.prototype.checkPosition=function(){this.hidden===!1&&(this.point.y<-20&&(this.point.y=529),this.point.y>550&&(this.point.y=1),this.point.x<-20&&(this.point.x=699),this.point.x>720&&(this.point.x=1))},s.prototype.clearBullets=function(){this.bullets.length>100&&this.bullets.splice(49,50)},s.prototype.thrusters=function(){var t={x:this.point.x+20.6155*Math.cos(this.orientation+.2),y:this.point.y-20.6155*Math.sin(this.orientation+.3)},i={x:this.point.x+20.6155*Math.cos(this.orientation-.2),y:this.point.y-20.6155*Math.sin(this.orientation-.3)};this.context.beginPath(),this.context.moveTo(this.point.x+30*Math.cos(this.orientation),this.point.y-30*Math.sin(this.orientation)),this.context.lineTo(t.x+Math.cos(this.orientation),t.y-Math.sin(this.orientation)),this.context.lineTo(i.x+Math.cos(this.orientation),i.y-Math.sin(this.orientation)),this.context.closePath(),this.context.fillStyle="white",this.context.fill()},s.prototype.hide=function(){this.hidden=!0,this.point={x:-1e3,y:-1e3}},s.prototype.unHide=function(){this.hidden=!1,this.point={x:350,y:300}},s.prototype.update=function(t){if(this.clearBullets(),this.keyboard.isDown(this.keyboard.KEYS.LEFT)?this.orientation+=.1:this.keyboard.isDown(this.keyboard.KEYS.RIGHT)&&(this.orientation-=.1),this.keyboard.isDown(this.keyboard.KEYS.UP)){var i=new Audio("thrusters.wav");if(i.play(),t%4===0&&this.thrusters(),this.speed<4){var e=Math.abs(this.momentum-this.orientation);e>.3&&(this.speed=1.75/(e+1)),this.speed+=.05,this.momentum=this.orientation}}if(this.keyboard.isDown(this.keyboard.KEYS.SPACE))if(0===this.coolDown){this.bullets.push(this.fireBullet());var s=new Audio("pulse-gun.wav");s.play()}else this.coolDown-=1},t.exports=s}]);